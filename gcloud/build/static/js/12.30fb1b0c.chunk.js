(this.webpackJsonpmain=this.webpackJsonpmain||[]).push([[12],{144:function(n,e,t){"use strict";t.d(e,"a",(function(){return d})),t.d(e,"b",(function(){return r})),t.d(e,"c",(function(){return s}));var o=t(148),c=t.n(o),i=t(167),a=function(){var n=(new Date).toGMTString(),e=new i.a("SHA-1","TEXT");return e.setHMACKey("erb6_D0px7Me5JGKZ6mFOJGVIGY","TEXT"),e.update("x-date: "+n),{Authorization:'hmac username="afbe22cd1d8548838bb4d543ae804aab", algorithm="hmac-sha1", headers="x-date", signature="'+e.getHMAC("B64")+'"',"X-Date":n}},d=function(n){return function(e){return c.a.get("https://ptx.transportdata.tw/MOTC/v2/Tourism/ScenicSpot?$top=30&$skip=".concat(n,"&$format=JSON"),{headers:a()}).then((function(n){return n})).catch((function(n){console.log(n)}))}},r=function(n,e){return function(t){return c.a.get("https://ptx.transportdata.tw/MOTC/v2/Tourism/ScenicSpot/".concat(n,"?$top=30&$skip=").concat(e,"&$format=JSON"),{headers:a()}).then((function(n){return n})).catch((function(n){console.log(n)}))}},s=function(){return function(n){return c.a.get("https://ptx.transportdata.tw/MOTC/v2/Tourism/ScenicSpot?$select=ID%2CName%2CPosition%2CAddress%2CTravelInfo%2COpenTime&$format=JSON",{headers:a()}).then((function(e){return n({type:"SET_MAP",payload:e.data}),e})).catch((function(n){console.log(n)}))}}},368:function(n,e,t){"use strict";t.r(e);var o=t(73),c=t(0),i=t(357),a=(t(214),t(46)),d=t(127),r=t(144),s=t(141),A=t.n(s),u=t(356),l=t.n(u),f=t(217),m=(t(148),t(3)),h=Object(i.e)({minZoom:8,accessToken:"pk.eyJ1IjoicDE3am9obm55IiwiYSI6ImNrNnZrdmhuazAxZzkzZ291dWVxYzZza2sifQ.hpQXThjlW9k0bbYc5CYNlA"}),p=new Image;p.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAMAAADW3miqAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAKOUExURQAAAB4eHh0dHRwcHB8fHxwcHBwcHAAAAAAAACIiIhoaGhwcHB0dHRwcHCQkJBwcHB0dHR4eHhwcHB0dHR4eHhsbGxwcHBoaGh0dHRwcHB0dHR4eHhwcHBsbGx4eHh0dHRwcHB0dHR0dHR4eHh0dHRoaGh0dHR8fHxwcHBwcHB4eHh4eHhwcHB4eHhwcHB0dHR0dHRwcHB0dHR0dHR8fHxwcHBsbGx0dHRkZGR4eHhwcHDMzMx0dHR4eHhwcHBwcHBkZGR4eHh4eHh0dHSAgIB0dHR0dHR0dHRwcHBwcHB0dHR0dHR0dHR0dHR0dHRwcHBwcHBwcHB0dHR0dHRwcHP///wAAAB0dHR4eHiAgIBsbGxQUFCEhIR8fHxMTExcXFxERERgYGBoaGgEBAQkJCTU1Nf7+/gcHBwgICAsLC56enhISEqCgoBkZGebm5gMDAxwcHFJSUg4ODnJychAQEEpKSqurqxUVFcLCwvHx8UJCQoeHh4yMjMPDw+3t7ZOTk52dnezs7A8PD+np6XV1dePj462trQICAoiIiNzc3Dg4OFlZWTAwMEhISP39/U5OTqenpy0tLcTExLOzs42NjYSEhGFhYfX19ZiYmL+/v+Tk5CMjI5WVldPT0+fn587OzoCAgMfHxwUFBWxsbJycnPz8/Dc3N8DAwAQEBKKioqWlpc3NzSgoKN/f35SUlFVVVV5eXs/PzwYGBu/v71FRUff39/v7+zIyMoODg9XV1bKysrm5uaOjo9HR0b29vaSkpOjo6NTU1AoKCkNDQ+7u7vLy8oKCgnt7e4WFhWpqam5ubjk5OfPz83d3dw0NDZqamjw8PN7e3vT09F9fX0BAQElJSVdXVz4+PjQ0NC8vL1ofU+oAAABVdFJOUwBL9Y4gnywCARY5woJQB3WlQrDN3TePJ4PfPNmEL/FXiJ1o8p4TGu10kMFuZOzlnD0193IphkqtHtKhBZs65u4KMiHKH0VPTj8kvmmalG+5u2OT51p/0B7NAAACX0lEQVQ4y62U5VMcQRDFIWhwibu7u7u79Zu18zvuDncIHgIEAsTd3d3d3V3+myzUzuYgECpV6S/b782vZnZmusfL659jSuSiBUsWL5w/cXyjiO84IdnsSkqyG9kwn54NIgF+ogwkOB7nXFe/FrFDA4x/bwn285mriCgmMT7DBqF98/pMOyUOGWdJj/0OmDr51mVaiqk4QnXiALK69/JkAlvIyNQG18VoSR6kfp5QKwFb+Ayxm3l2GEr/30xrA3L0ZRzbeHb0zImBYTrUxopNfGSXbbfOnwIboENtkaIP7AF26uKYM5ifQ0eGHbqfAqTpogTNvDWos/XQQW7vtVtSDdu5OgnWR4NCZFMpt7fCwLCBq9N2S18N8jMrK7m90cUErOdqtdXYQ4MGm8XLmpsNiTGjaZ8mEy1yVw0anhVXoblpEJg61TlNHrdJXTTIW8JtoptFRAUJ6UyF1qxVgTtqQRSCddOgMQzPiCpQSBcRJzKmXEoqoFdO9Q4vYFAQP8xgV5X6k+8QS/FIFxUnsukFfhI9kMwRgRxaasB7Skx24T4VwejGPSpHzZLPIQ7RryVsuVuiT1AjV50L+fRSTRl9dMrTPUplhYJK+vbh6+uEfMqNpTL5S/WPEnJADPIsqAgBn2v2fK32VJ/W1t13KCF16zdaQvUbz+otrYIhqn5DRQtw513lyJO3gBj1Z08tU4phrSy/9fBu2Y0rZshieEPdOXWsoRiwuR+pWzMa5k1rpM+HTpgsSCZTsjDJZ8RfXoyAuZGzZs+Z4fVfInRm00w4Y6FNQqMZG9kkNIo186/v/QJilAmOfeEu8AAAAABJRU5ErkJggg==";var H=["londonCycle",p],b=new Image;b.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAMAAADW3miqAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAJzUExURQAAAP///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////xwcHBwcHBsbGxwcHBYWFh0dHf///////////////////////////xUVFf///////////wAAAP///////wAAAP///////////////////////////////////////////////////////////////////////////////wAAAP///x0dHQkJCV9fXwUFBY2NjeLi4gICAgQEBDk5OQ4ODpubm+fn56GhodDQ0CwsLF5eXnV1dc7OznBwcBsbG/z8/LCwsDExMWlpaSAgIL+/v9XV1crKyu7u7tTU1CMjI6urq+np6ZeXl0NDQ/X19SoqKnZ2dpqamkdHR+Hh4Tc3N1xcXOvr646OjoKCgtra2qysrL6+vv7+/q6urnFxcZKSkoCAgHp6epSUlExMTNzc3JaWlggICG9vbz4+PkFBQcjIyLy8vBoaGiUlJUBAQKCgoJmZmerq6i8vL8XFxTMzM9LS0gEBAYqKim1tbZOTk7i4uK2trWJiYicnJ0hISBYWFg0NDRQUFKqqqp+fn1JSUlhYWIeHh1dXV11dXejo6O/v7/39/YyMjDQ0NN7e3oiIiCIiIqampgMDA+zs7OTk5A8PD93d3c3Nza+vrwoKCh4eHvT09NYKuXkAAABedFJOUwA5AUIK7h8WkJ7OLTw21yHxhGAb7wRsL/m+wN7ydIdLI+Kdn1aIaIGbcaETSjUpjh2g6b+cqfcvR3KLx0GN9wbJXlTmBU9TPx5DJE4DMtJ1g7Cvb1qUuWmavDroo5KyqbyrAAACE0lEQVQ4y62UBXPbQBBGw2lSZmZmZmZmpn22A26SpmFuyszMzMzMzPSTerLvZKjTTGe6M9Ls9+3T6e60p7Cwf45RC+bOnjN/3szIqDKRjl2HYKJDTGimuqf6qbj0hSdpGQKJraIKV647kkXknuuSEtEVg5mq1SBpidhxJkthlQKZmo1gnwTEXkVVDoDqw35ddDp14oKGtf2YOpBqRti2wWQHoIKPiapF2lFT2rHVfuNJaGZDNSDDFNaBPf/j0MSGGnDYfno9bLfFKZrHaqZuPQ7afjpsskUmNNVQK3AZe7O12WuMOgGNNdQWzhp7tQWtNOq0b31xcFG7CassaG2KodKI01A7yNfmRm8PbNHy6gVaaKg93NXuTi+0S8s70FpDnSBbJOdagjh263ZaJnJbXY+hjYa69eChiJubcsj0XIFks0IkEcLNZnYnN0c+vmSp5VpxXjLgp8hbBkYYaBC8luTlcEOOWMw5eaLuDimA4b4vPAw1uIK4JamoATMt9If8YuFQHxQOpe4PSenFHJM9eXL51edvX4vc32GWf9NNgyzPolOsHr+fYKV5sCiwf2eoFn/v371fSiA++CRMV7N49MAgzndKxk/640xNtSZbkvj8Tf6zp0W5Kl8c6nDG9MQvpkwu45x3GTzSS0T36vy3X8a4sRNHR06ICPsfMX5M+cyIwsL+5UIDHI7e5UJ9+zj6BXu/AftsEsYbQEjNAAAAAElFTkSuQmCC";var j=["londonCycle2",b];e.default=function(){var n=Object(c.useState)(null),e=Object(o.a)(n,2),t=e[0],s=e[1],u=Object(c.useState)(null),p=Object(o.a)(u,2),b=(p[0],p[1],Object(c.useState)([])),x=Object(o.a)(b,2),O=x[0],w=x[1],I=Object(c.useState)([120.6935087,24.1470135]),g=Object(o.a)(I,2),v=(g[0],g[1],Object(c.useState)([15])),B=Object(o.a)(v,2),T=(B[0],B[1],Object(a.d)()),C=Object(c.useState)({center:[120.6935087,24.1470135],zoom:[15]}),k=Object(o.a)(C,2),S=k[0],N=k[1],R=(Object(a.e)(),Object(c.useState)({lng:120.6935087,lat:24.1470135})),D=Object(o.a)(R,2);D[0],D[1];Object(c.useEffect)((function(){T(Object(r.c)()).then((function(n){200===n.status?w(n.data):console.log("\u7121\u6cd5\u8b80\u53d6ptx\u8cc7\u6599\u3002")}))}),[]);return Object(m.jsx)("div",{children:O.length>2?Object(m.jsxs)(h,{style:"mapbox://styles/p17johnny/ckch5h95z1ra21jmhwxkwt7u7",containerStyle:{height:"calc(100vh - 158px)",width:"98vw"},center:S.center,zoom:S.zoom,children:[Object(m.jsx)(i.b,{type:"symbol",id:"marker",layout:{"icon-image":"londonCycle","icon-anchor":"bottom","text-field":["get","name"],"text-size":12,"text-anchor":"top"},images:H,children:O.map((function(n){return Object(m.jsx)(i.a,{properties:{name:n.Name},coordinates:[n.Position.PositionLon,n.Position.PositionLat],onClick:function(){return function(n,e){var t,o,c,i,a,d,r;console.log(n,e),console.log("name:",e),console.log("travelInfo:",null===(t=O[O.findIndex((function(e){return e.ID===n}))])||void 0===t?void 0:t.TravelInfo,typeof(null===(o=O[O.findIndex((function(e){return e.ID===n}))])||void 0===o?void 0:o.TravelInfo)),console.log("Address:",null===(c=O[O.findIndex((function(e){return e.ID===n}))])||void 0===c?void 0:c.Address,typeof(null===(i=O[O.findIndex((function(e){return e.ID===n}))])||void 0===i?void 0:i.Address)),s({name:e,position:[O[O.findIndex((function(e){return e.ID===n}))].Position.PositionLon,O[O.findIndex((function(e){return e.ID===n}))].Position.PositionLat],travelInfo:(null===(a=O[O.findIndex((function(e){return e.ID===n}))])||void 0===a?void 0:a.TravelInfo)||"",address:(null===(d=O[O.findIndex((function(e){return e.ID===n}))])||void 0===d?void 0:d.Address)||"",openTime:(null===(r=O[O.findIndex((function(e){return e.ID===n}))])||void 0===r?void 0:r.OpenTime)||""}),N({center:[O[O.findIndex((function(e){return e.ID===n}))].Position.PositionLon,O[O.findIndex((function(e){return e.ID===n}))].Position.PositionLat],zoom:[18]})}(n.ID,n.Name)}},n.ID)}))}),t&&Object(m.jsx)(i.b,{type:"symbol",id:"marker2",layout:{"icon-image":"londonCycle2","icon-anchor":"bottom","text-field":["get","clickname"],"text-size":12,"text-anchor":"top"},images:j,children:Object(m.jsx)(i.a,{properties:{clickname:t.name},onClick:function(){N({center:t.position,zoom:[16]})},coordinates:t.position})}),t?Object(m.jsx)(i.d,{coordinates:null===t||void 0===t?void 0:t.position,offset:{"bottom-left":[12,-38],bottom:[0,-38],"bottom-right":[-12,-38]},children:Object(m.jsxs)("div",{style:{maxWidth:"300px"},children:[Object(m.jsxs)("div",{className:"row ml-0 mr-5",children:[Object(m.jsx)("h4",{children:null===t||void 0===t?void 0:t.name}),Object(m.jsx)(d.a,{onClick:function(){return s(null)},icon:Object(m.jsx)(f.a,{}),shape:"circle",style:{position:"absolute",right:"20px"}})]}),Object(m.jsxs)(A.a,{children:[Object(m.jsx)("b",{children:"\u4ea4\u901a\u53c3\u8003\uff1a"})," ",(null===t||void 0===t?void 0:t.travelInfo)||"\u7121\u4ea4\u901a\u53c3\u8003\u8cc7\u6599"]}),Object(m.jsxs)(A.a,{children:[Object(m.jsx)("b",{children:"\u958b\u653e\u6642\u9593\uff1a"})," ",(null===t||void 0===t?void 0:t.openTime)||"\u7121\u71df\u696d\u6642\u9593\u8cc7\u6599"]}),Object(m.jsxs)(l.a,{children:[Object(m.jsx)("b",{children:"GoogleMap\u9023\u7d50\uff1a"}),"\xa0",Object(m.jsx)("a",{onClick:function(){return function(){var n=t.position[1],e=t.position[0];window.open("https://maps.google.com/maps?q=".concat(n,",").concat(e),"_blank")}()},className:"text-primary",children:(null===t||void 0===t?void 0:t.address)||"\u7121\u5730\u5740\u53c3\u8003\u8cc7\u6599"})]})]})}):null]}):null})}}}]);
//# sourceMappingURL=12.30fb1b0c.chunk.js.map